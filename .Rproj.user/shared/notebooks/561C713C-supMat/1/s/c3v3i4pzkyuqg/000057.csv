"0","df_SurveyResps <- read_csv(""data/surveyResponses.csv"")"
"0","# fix GeneralClinic value to be a the cohorted equivalent "
"0","df_SurveyResps <- df_SurveyResps %>% "
"0","  rename(CohortedClinic = GeneralClinic) %>% "
"0","  mutate(CohortedClinic = abs(CohortedClinic - 1))"
"0","theseQs <- uniqueQs[uniqueQs %in% colnames(df_SurveyResps)]"
"0","df_SurveyResps %>% "
"0","  select(ID, uniqueQs) %>%"
"0","  mutate(LedOrAdvice = NurseLedClinic + NurseAdviceLine >= 1) %>% "
"0","  select(-c(OrganSpecialtyMDT, NurseLedClinic, NurseAdviceLine)) %>% "
"0","  gather(2:ncol(.), "
"0","         key = ""Question"", "
"0","         value = ""Response"") %>%"
"0","  mutate("
"0","    Response = case_when(Response == 1 ~ ""Yes"","
"0","                         Response == 0 ~ ""No"", "
"0","                         TRUE ~ ""No answer""),"
"0","    `Has Service Component` = factor(Response, levels = c(""Yes"", ""No"", ""No answer"")),"
"0","    humanLabel = case_when("
"0","      Question == ""LocalAAVpath"" ~ ""Local AAV pathway"","
"0","      Question == ""LocalGCApath"" ~ ""Local GCA pathway"","
"0","      Question == ""CohortedClinic"" ~ ""Cohorted clinic"","
"0","      Question == ""DiscussMDT"" ~ ""Any MDT meeting"","
"0","      Question == ""VascMDT"" ~ ""Vasculitis MDT"","
"0","      Question == ""OrganSpecialtyMDT"" ~ ""Local specialty/organ specific MDT only"", # Figure out the label for this one"
"0","      Question == ""OwnDayCaseUnit"" ~ ""Own day case unit"","
"0","      Question == ""SpecVascNurse"" ~ ""Specialist vasculitis nurse"","
"0","      Question == ""NurseAdviceLine"" ~ ""Nurse Advice Line"", "
"0","      Question == ""NurseLedClinic"" ~ ""Nurse led clinic"","
"0","      Question == ""LocalDatabase"" ~ ""Local database vasculitis patients"","
"0","      Question == ""WaitTimeNewWithinWeek"" ~ ""Wait time for new patients (<1 week)"","
"0","      Question == ""FrequencyFollowUpWithinWeek"" ~ ""Wait time return patients (<1 week)"","
"0","      Question == ""JointParaClinic"" ~ ""Joint/Parallel clinic"","
"0","      Question == ""UrgentIVWithinWeek"" ~ ""Urgent IV access day case <1 week"","
"0","      Question == ""LedOrAdvice"" ~ ""Nurse advice line and/or led cinic"""
"0","    )) %>% "
"0","  # rowid_to_column(var = ""Service"") %>%"
"0","  ggplot(aes(as.factor(ID), humanLabel, fill = `Has Service Component`)) + "
"0","  geom_tile(lwd = 1.5, "
"0","            colour = ""white"", "
"0","            alpha = .7) + "
"0","  scale_x_discrete(""Service"") +"
"0","  scale_y_discrete("""", labels = function(x) str_wrap(x, 20)) +"
"0","  scale_fill_manual(values = c(""#1a237e"", ""#b71c1c"", ""#cfd8dc"")) + "
"0","  coord_cartesian(expand = F) + "
"0","  theme_minimal() + "
"0","  theme(axis.ticks = element_blank(), "
"0","        legend.position = ""bottom"", "
"0","        axis.text    = element_text(size = max(textSize)),"
"0","        axis.title   = element_text(size = max(textSize) + 1),"
"0","        legend.text  = element_text(size = max(textSize)),"
"0","        legend.title = element_text(size = max(textSize)),"
"0","        plot.background = element_rect(fill = ""white"", colour = ""white""))"
